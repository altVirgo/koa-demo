webpackJsonp([1],{"+VvK":function(t,e){},"3EXP":function(t,e){},"8b7Q":function(t,e){},"9xES":function(t,e){},AJnW:function(t,e){},L1Q6:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("zL8q"),n=a.n(i),l=a("7+uW"),o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},staticRenderFns:[]};var r=a("VU/8")({name:"App"},o,!1,function(t){a("cTSF")},null,null).exports,s=a("/ocq"),c=a("woOf"),d=a.n(c),u=a("mvHQ"),p=a.n(u),v=a("mw3O"),f=a.n(v),m={name:"ServiceLevelSetting",props:["levelInfoLevel","levelInfoIndex"],data:function(){return{curStep:0,dialogVisibleLevel:!1,dialogVisibleIndex:!1,loading:!1,tableData:[],tableDataIndex:[],curLevelInfo:{},curIndexInfo:[]}},methods:{clickPreStep:function(){this.curStep--},clickNextStep:function(){this.curStep++},editLevel:function(t,e){this.dialogVisibleLevel=!0,this.curLevelInfo=JSON.parse(p()(t)),this.curLevelInfo.idx=e},saveLevel:function(){if(void 0!==this.curLevelInfo.idx){var t=this.curLevelInfo.idx;for(var e in delete this.curLevelInfo.idx,this.curLevelInfo)this.tableData[t][e]=this.curLevelInfo[e]}else this.tableData.push(this.curLevelInfo);this.dialogVisibleLevel=!1,this.$emit("levelInfoLevel",this.tableData)},removeLevel:function(t){var e=this;this.$confirm("确认删除该服务等级？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.tableData.splice(t,1),e.tableData.length<=0?e.tableDataIndex=[]:e.tableDataIndex.map(function(a,i){for(var n in a)if(t==n)for(var l=t;l<=e.tableData.length;)l===e.tableData.length?delete e.tableDataIndex[i][l]:e.tableDataIndex[i][l]=e.tableDataIndex[i][l+1],l++}),console.log(e.tableDataIndex)}).catch(function(){})},editIndex:function(t,e){this.dialogVisibleIndex=!0,this.curIndexInfo=JSON.parse(p()(t)),this.curIndexInfo.idx=e},saveIndex:function(){if(void 0!==this.curIndexInfo.idx){var t=this.curIndexInfo.idx;for(var e in delete this.curIndexInfo.idx,this.curIndexInfo)this.tableDataIndex[t][e]=this.curIndexInfo[e]}else this.tableDataIndex.push(this.curIndexInfo);this.dialogVisibleIndex=!1,this.$emit("levelInfoIndex",this.tableDataIndex)},removeIndex:function(t){var e=this;this.$confirm("确认删除该等级指标？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.tableDataIndex.splice(t,1)})}},watch:{levelInfoLevel:function(t,e){this.tableData=t},levelInfoIndex:function(t,e){this.tableDataIndex=t}}},h={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"panel"},[a("el-steps",{attrs:{active:t.curStep,"finish-status":"success"}},[a("el-step",{attrs:{title:"设置服务等级"}}),t._v(" "),a("el-step",{attrs:{title:"设置等级指标"}}),t._v(" "),a("el-step",{attrs:{title:"完成"}})],1),t._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:0===t.curStep,expression:"curStep === 0"}]},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"等级名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"等级描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editLevel(e.row,e.$index)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.removeLevel(e.$index)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("span",{staticClass:"el-icon-circle-plus-outline",on:{click:function(e){t.dialogVisibleLevel=!0,t.curLevelInfo={}}}}),t._v(" "),a("div",{staticClass:"ibox-footer text-right mt20"},[a("el-button",{staticClass:"btn btn-primary",attrs:{type:"primary",plain:""},on:{click:function(e){return t.clickNextStep()}}},[t._v("下一步")])],1)],1),t._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:1===t.curStep,expression:"curStep===1"}]},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:t.tableDataIndex,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"指标名称"}}),t._v(" "),t._l(t.tableData,function(t,e){return a("el-table-column",{key:e,attrs:{prop:""+e,label:t.name}})}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.editIndex(e.row,e.$index)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.removeIndex(e.$index)}}},[t._v("删除")])]}}])})],2),t._v(" "),a("span",{staticClass:"el-icon-circle-plus-outline",on:{click:function(e){t.dialogVisibleIndex=!0,t.curIndexInfo={}}}}),t._v(" "),a("div",{staticClass:"ibox-footer text-right"},[a("el-button",{staticClass:"btn btn-primary btn-outline mt20",attrs:{type:"primary",plain:""},on:{click:function(e){return t.clickPreStep()}}},[t._v("上一步")]),t._v(" "),a("el-button",{staticClass:"btn btn-primary mt20",attrs:{type:"primary",plain:""},on:{click:function(e){return t.clickNextStep()}}},[t._v("下一步")])],1)],1),t._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:2===t.curStep,expression:"curStep===2"}]},[a("el-button",{staticClass:"mt20",attrs:{type:"primary",plain:""},on:{click:function(e){return t.clickPreStep()}}},[t._v("返回修改")]),t._v(" "),a("el-tabs",{staticClass:"mt20",attrs:{type:"border-card"}},[a("el-tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 服务等级")]),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"等级名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"description",label:"等级描述"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}})],1)],1),t._v(" "),a("el-tab-pane",{attrs:{label:"等级指标"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mt20",staticStyle:{width:"100%"},attrs:{data:t.tableDataIndex,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"name",label:"指标名称"}}),t._v(" "),t._l(t.tableData,function(t,e){return a("el-table-column",{key:e,attrs:{prop:""+e,label:t.name}})})],2)],1)],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑服务等级",visible:t.dialogVisibleLevel,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleLevel=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"等级名称:"}},[a("el-input",{model:{value:t.curLevelInfo.name,callback:function(e){t.$set(t.curLevelInfo,"name",e)},expression:"curLevelInfo.name"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"等级描述:"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.curLevelInfo.description,callback:function(e){t.$set(t.curLevelInfo,"description",e)},expression:"curLevelInfo.description"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注:"}},[a("el-input",{model:{value:t.curLevelInfo.remark,callback:function(e){t.$set(t.curLevelInfo,"remark",e)},expression:"curLevelInfo.remark"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleLevel=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveLevel()}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"编辑等级指标",visible:t.dialogVisibleIndex,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleIndex=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"指标名称:"}},[a("el-input",{model:{value:t.curIndexInfo.name,callback:function(e){t.$set(t.curIndexInfo,"name",e)},expression:"curIndexInfo.name"}})],1)],1),t._v(" "),t._l(t.tableData,function(e,i){return a("el-col",{key:i,attrs:{span:24}},[a("el-form-item",{attrs:{label:e.name+":"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.curIndexInfo[i],callback:function(e){t.$set(t.curIndexInfo,i,e)},expression:"curIndexInfo[i]"}})],1)],1)})],2),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleIndex=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveIndex()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var b={name:"ServiceEdit",components:{ServiceLevelSetting:a("VU/8")(m,h,!1,function(t){a("+VvK")},"data-v-c9793716",null).exports},props:["value","curNode","curRow"],data:function(){return{serviceInfo:{},dependService:{list:[],checkListLabel:"",checkList:[],orginalList:[],dialogVisible:!1},excludeService:{list:[],checkListLabel:"",checkList:[],orginalList:[],dialogVisible:!1},levelInfoIndex:[],levelInfoLevel:[],rules:{servName:[{required:!0,message:"请输入服务名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]}}},mounted:function(){this.curRow=this.curRow||{},this.initServiceList(1),this.initServiceList(2),this.curRow.serviceId?this.initData():(this.levelInfoLevel=[],this.levelInfoIndex=[],this.serviceInfo.serviceTypeLabel=this.curNode.label)},methods:{initData:function(){var t=this;this.axios({method:"post",url:" /a/operate/serServices/getServiceObject",params:{sign:1,serviceId:this.curRow.serviceId}}).then(function(e){"XX00"===e.data.transCode?(t.serviceInfo=e.data.data.serviceInfo,t.levelInfoLevel=e.data.data.serviceLevelInfo,t.levelInfoIndex=e.data.data.quotaInfo,t.dependService.checkList=JSON.parse(e.data.data.serviceInfo.dependsService),t.dependService.orginalList=JSON.parse(e.data.data.serviceInfo.dependsService),t.excludeService.checkList=JSON.parse(e.data.data.serviceInfo.mutexService),t.excludeService.orginalList=JSON.parse(e.data.data.serviceInfo.mutexService),console.log(t.dependService.checkList,t.excludeService.checkList),t.changeExcludeDisabledStatus(),t.changeDependDisabledStatus()):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert(e,"提示",{confirmButtonText:"确定"})})},initServiceList:function(t){var e=this;this.axios({url:"/a/operate/serServices/getAllServices",method:"post",params:{sign:t,serviceId:this.curRow.serviceId}}).then(function(a){(a.data.tranCode="XX00")&&(1===t?e.dependService.list=JSON.parse(p()(a.data.data)):e.excludeService.list=JSON.parse(p()(a.data.data)))}).catch(function(t){e.loading=!1,e.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},saveService:function(){var t=this;if(this.checkValid()){var e=d()(this.serviceInfo,{sign:1,fatherId:this.serviceInfo.serviceType||this.curNode.id},{levels:JSON.parse(p()(this.levelInfoLevel||[])),quatos:JSON.parse(p()(this.levelInfoIndex||[]))});1===e.levels.length?e.levels.push({}):0===e.levels.length&&(e.levels=[{},{}]),1===e.quatos.length?e.quatos.push({}):0===e.quatos.length&&(e.quatos=[{},{}]),e.levels.map(function(t,a){e.levels[a]=p()(e.levels[a])}),e.quatos.map(function(t,a){e.quatos[a]=p()(e.quatos[a])}),e.dependsService=this.dependService.checkList,e.mutexService=this.excludeService.checkList,this.axios.post("/a/operate/serServices/saveService",f.a.stringify(e,{indices:!1})).then(function(e){t.loading=!1,(e.data.tranCode="XX00")&&t.$emit("input",!1)}).catch(function(e){t.loading=!1,t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})}},changeDependDisabledStatus:function(){var t=this,e=[];this.excludeService.list.map(function(a,i){t.dependService.checkList.indexOf(a.serviceId)>=0?t.excludeService.list[i].disabled=!0:t.excludeService.list[i].disabled=!1,t.dependService.checkList.indexOf(a.serviceId)>=0&&e.push(a.servName)}),this.dependService.checkListLabel=e.toString()},changeExcludeDisabledStatus:function(){var t=this,e=[];this.dependService.list.map(function(a,i){t.excludeService.checkList.indexOf(a.serviceId)>=0?t.dependService.list[i].disabled=!0:t.dependService.list[i].disabled=!1,t.excludeService.checkList.indexOf(a.serviceId)>=0&&e.push(a.servName)}),this.excludeService.checkListLabel=e.toString()},checkValid:function(){var t=!1;return this.$refs.from.validate(function(e){e&&(t=!0)}),t}}},g={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h3",[t._v(" 服务创建")]),t._v(" "),a("el-form",{ref:"from",attrs:{model:t.serviceInfo,"label-width":"100px",rules:t.rules}},[a("el-form-item",{attrs:{label:"服务名称",prop:"servName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.serviceInfo.servName,callback:function(e){t.$set(t.serviceInfo,"servName",e)},expression:"serviceInfo.servName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"服务类型"}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:t.serviceInfo.serviceTypeLabel,callback:function(e){t.$set(t.serviceInfo,"serviceTypeLabel",e)},expression:"serviceInfo.serviceTypeLabel"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"是否主服务"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.serviceInfo.isMain,callback:function(e){t.$set(t.serviceInfo,"isMain",e)},expression:"serviceInfo.isMain"}},[a("el-option",{attrs:{value:"1",label:"是"}}),t._v(" "),a("el-option",{attrs:{value:"0",label:"否"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"依赖服务"}},[a("el-col",{staticClass:"mr20",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:t.dependService.checkListLabel,callback:function(e){t.$set(t.dependService,"checkListLabel",e)},expression:"dependService.checkListLabel"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dependService.dialogVisible=!0}}},[t._v("选 择")])],1),t._v(" "),a("el-form-item",{attrs:{label:"互斥服务"}},[a("el-col",{staticClass:"mr20",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:t.excludeService.checkListLabel,callback:function(e){t.$set(t.excludeService,"checkListLabel",e)},expression:"excludeService.checkListLabel"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.excludeService.dialogVisible=!0}}},[t._v("选 择")])],1),t._v(" "),a("el-form-item",{attrs:{label:"是否启用"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.serviceInfo.status,callback:function(e){t.$set(t.serviceInfo,"status",e)},expression:"serviceInfo.status"}},[a("el-option",{attrs:{value:"1",label:"启用"}}),t._v(" "),a("el-option",{attrs:{value:"0",label:"不启用"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"服务提供方"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.serviceInfo.servProvName,callback:function(e){t.$set(t.serviceInfo,"servProvName",e)},expression:"serviceInfo.servProvName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"服务描述"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.serviceInfo.servDesc,callback:function(e){t.$set(t.serviceInfo,"servDesc",e)},expression:"serviceInfo.servDesc"}})],1),t._v(" "),a("h3",[t._v(" 服务等级与服务指标")]),t._v(" "),a("ServiceLevelSetting",{attrs:{levelInfoLevel:t.levelInfoLevel,levelInfoIndex:t.levelInfoIndex},on:{"update:levelInfoLevel":function(e){t.levelInfoLevel=e},"update:level-info-level":function(e){t.levelInfoLevel=e},"update:levelInfoIndex":function(e){t.levelInfoIndex=e},"update:level-info-index":function(e){t.levelInfoIndex=e}}})],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.$emit("input",!1)}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveService()}}},[t._v("确 定")])],1),t._v(" "),a("el-dialog",{attrs:{title:"依赖服务列表",visible:t.dependService.dialogVisible,width:"50%"},on:{"update:visible":function(e){return t.$set(t.dependService,"dialogVisible",e)},closed:function(e){return t.changeDependDisabledStatus()}}},[a("el-checkbox-group",{model:{value:t.dependService.checkList,callback:function(e){t.$set(t.dependService,"checkList",e)},expression:"dependService.checkList"}},t._l(t.dependService.list,function(e,i){return a("el-checkbox",{key:i,attrs:{label:e.serviceId,disabled:e.disabled}},[t._v(t._s(e.servName))])}),1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.dependService.dialogVisible=!1,t.dependService.checkList=JSON.parse(JSON.stringify(t.dependService.orginalList))}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dependService.dialogVisible=!1,t.dependService.orginalList=JSON.parse(JSON.stringify(t.dependService.checkList))}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"互斥服务列表",visible:t.excludeService.dialogVisible,width:"50%"},on:{"update:visible":function(e){return t.$set(t.excludeService,"dialogVisible",e)},closed:function(e){return t.changeExcludeDisabledStatus()}}},[a("el-checkbox-group",{model:{value:t.excludeService.checkList,callback:function(e){t.$set(t.excludeService,"checkList",e)},expression:"excludeService.checkList"}},t._l(t.excludeService.list,function(e,i){return a("el-checkbox",{key:i,attrs:{label:e.serviceId,disabled:e.disabled}},[t._v(t._s(e.servName))])}),1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.excludeService.dialogVisible=!1,t.excludeService.checkList=JSON.parse(JSON.stringify(t.excludeService.orginalList))}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.excludeService.dialogVisible=!1,t.excludeService.orginalList=JSON.parse(JSON.stringify(t.excludeService.checkList))}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var _={name:"ServiceManagement",components:{ServiceEdit:a("VU/8")(b,g,!1,function(t){a("PGHr")},"data-v-2968e1da",null).exports},data:function(){return{keyWork:"",isEditing:!1,loading:!1,tableData:[],pageNo:1,pageSize:10,total:0,treeData:[],treeLoading:!1,curNode:{},curServiceInfo:{}}},mounted:function(){this.initNodeData()},methods:{initNodeData:function(){var t=this;this.treeLoading=!0,this.axios({url:"/a/operate/serServices/menuList",method:"post",params:{sign:1}}).then(function(e){t.treeLoading=!1,"XX00"===e.data.transCode&&(t.treeData=e.data.data,t.treeData.length>0&&t.$nextTick(function(){t.$refs.tree.setCurrentKey(t.treeData[0].id),t.initData(1,t.treeData[0])}))}).catch(function(e){t.treeLoading=!1,t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initData:function(t,e){var a=this;this.pageNo=t||1,this.curNode=e||this.curNode,this.loading=!0,this.axios({url:"/a/operate/serServices/list",method:"post",params:{sign:1,id:this.curNode.id,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWork}}).then(function(t){a.loading=!1,"XX00"===t.data.transCode&&(a.tableData=t.data.data,a.total=t.data.total)}).catch(function(t){a.loading=!1,a.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},appendNode:function(t,e){var a=this,i=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.1)"});this.axios({url:"/a/operate/serServices/AddMenu",method:"post",params:{sign:1,parentLabel:t.id,newName:e}}).then(function(e){i.close(),"XX00"===e.data.transCode?(t.children?t.children.push(e.data.data):(a.$set(t,"children",[]),1===t.id?a.initNodeData():t.children.push(e.data.data)),a.initNodeData(),a.$nextTick(function(){a.$refs.tree.setCurrentKey(e.data.data.id),a.initData(1,a.treeData[0])})):a.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){i.close(),a.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},deleteNode:function(t){var e=this,a=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.1)"});this.axios({url:"/a/operate/serServices/DeleteMenu",method:"post",params:{sign:1,id:t.id}}).then(function(t){a.close(),"XX00"===t.data.transCode?(e.$message({type:"success",message:"删除成功"}),e.initNodeData()):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){a.close(),e.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},editNode:function(t,e){var a=this,i=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.1)"});this.axios({method:"post",url:"/a/operate/serServices/EditMenu",params:{sign:1,id:t.id,newName:e}}).then(function(n){i.close(),"XX00"===n.data.transCode?(t.label=e,a.$message({type:"success",message:"修改成功"})):a.$alert(n.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){i.close(),a.$alert(t,"提示",{confirmButtonText:"确定"})})},clickDeleteNode:function(t){var e=this;this.$confirm("确认删除该服务类型, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteNode(t)}).catch(function(){})},clickAppendNode:function(t){var e=this;this.$prompt("请输入节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){var i=a.value;e.appendNode(t,i)}).catch(function(){})},clickEditNode:function(t){var e=this;this.$prompt("请输入节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.label}).then(function(a){var i=a.value;e.editNode(t,i)}).catch(function(){})},clickAddService:function(){this.curNode.id?(this.curServiceInfo={},this.isEditing=!0):this.$alert("请先选择左侧服务类型","提示",{confirmButtonText:"确定"})},clickEditService:function(t){this.curServiceInfo=t,this.isEditing=!0},clickDeleteService:function(t){var e=this;this.$confirm("确认删除该服务, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteService(t)}).catch(function(){})},deleteService:function(t){var e=this;this.axios({method:"post",url:"/a/operate/serServices/delete",params:{sign:1,id:t.serviceId}}).then(function(t){"XX00"===t.data.transCode?(e.$message({type:"success",message:"删除成功"}),e.initData(1)):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.$alert(t,"提示",{confirmButtonText:"确定"})})}},watch:{isEditing:function(t,e){t==e||t||this.initData(1)}}},x={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isEditing?t._e():a("div",{staticClass:"title"},[a("h3",[t._v("服务类别设置")]),t._v(" "),a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:function(e){return t.clickAddService()}}},[t._v("\n      新增服务\n    ")]),t._v(" "),a("div",{staticClass:"search-box mr20"},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.keyWork,callback:function(e){t.keyWork=e},expression:"keyWork"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initData()}}})],1)],1),t._v(" "),t.isEditing?t._e():a("div",{staticClass:"flex"},[a("div",{staticClass:"left-wrapper"},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{data:t.treeData,"node-key":"id","default-expand-all":"","expand-on-click-node":!1,"check-on-click-node":!0,"highlight-current":!0,"current-node-key":t.curNode.id},on:{"current-change":function(e){t.initData(1,e)}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,n=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"node-label"},[t._v(t._s(i.label))]),t._v(" "),a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(){return t.clickAppendNode(n)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(){return t.clickEditNode(n)}}},[a("i",{staticClass:"el-icon-edit-outline"})]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(){return t.clickDeleteNode(n)}}},[a("i",{staticClass:"el-icon-delete"})])],1)])}}],null,!1,3599246332)})],1),t._v(" "),a("div",{staticClass:"right-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"index",label:"序号",width:"80"}}),t._v(" "),a("el-table-column",{attrs:{prop:"servName",label:"服务名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statusLabel",label:"服务状态"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serviceTypeLabel",label:"服务类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.clickEditService(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.clickDeleteService(e.row)}}},[t._v("删除")])]}}],null,!1,3866475094)})],1),t._v(" "),t.tableData.length>0?a("el-pagination",{staticClass:"mt20 pull-right",attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,"page-size":t.pageSize,total:t.total},on:{"current-change":t.initData}}):t._e()],1)]),t._v(" "),t.isEditing?a("ServiceEdit",{attrs:{curNode:t.curNode,curRow:t.curServiceInfo},model:{value:t.isEditing,callback:function(e){t.isEditing=e},expression:"isEditing"}}):t._e()],1)},staticRenderFns:[]};var I=a("VU/8")(_,x,!1,function(t){a("8b7Q")},"data-v-33a10a12",null).exports,y=a("bOdI"),k=a.n(y),S={name:"ProductEdit",props:["value","curNode","curRow"],data:function(){return{productInfo:{relatedId:""},providerList:[],productTypeList:[],billFrequencyList:[],fileList:[],serviceInfo:{list:[],curService:{},checkId:"",checkLabel:"",orginal:[],dialogVisible:!1},priceInfo:[],rules:{prodName:[{required:!0,message:"请输入产品名称",trigger:"blur"},{min:1,max:20,message:"长度在 1 到 20 个字符",trigger:"blur"}]},keyWord:""}},mounted:function(){this.curRow=this.curRow||{},this.initProductType(),this.initBillFrequency(),this.initProvider(),this.initService(),this.productInfo.prodType=this.curNode.id,this.curRow.productId&&this.initData()},methods:{initData:function(){var t=this;this.axios({method:"post",url:"/a/operate/products/getProductInfos",params:{sign:1,productId:this.curRow.productId}}).then(function(e){"XX00"===e.data.transCode?(t.productInfo=e.data.data.productInfo,t.priceInfo=e.data.data.levePrice,t.fileList[0]=e.data.data.productInfo.secIcon,t.fileList[1]=e.data.data.productInfo.productDescs,t.fileList[2]=e.data.data.productInfo.useGuide,t.fileList[3]=e.data.data.productInfo.example1,t.fileList[4]=e.data.data.productInfo.example2,t.fileList[5]=e.data.data.productInfo.example3,t.serviceInfo.checkId=t.serviceInfo.orginal=t.productInfo.relatedId,t.serviceInfo.checkLabel=t.productInfo.relatedLabel):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert(e,"提示",{confirmButtonText:"确定"})})},initProductType:function(){var t=this;this.axios({url:"/a/operate/products/selectProductType",method:"post",params:{sign:1}}).then(function(e){(e.data.tranCode="XX00")&&(t.productTypeList=e.data.data)}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initBillFrequency:function(){var t=this;this.axios({url:"/a/operate/products/selectBillFrequency",method:"post",params:{sign:1}}).then(function(e){(e.data.tranCode="XX00")&&(t.billFrequencyList=e.data.data)}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initProvider:function(){var t=this;this.axios({url:"/a/operate/products/getProvider",method:"post",params:{sign:1}}).then(function(e){(e.data.tranCode="XX00")&&(t.providerList=e.data.data)}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initService:function(){var t=this;this.axios({url:"/a/operate/products/selectService",method:"post",params:{sign:1,key:this.keyWord}}).then(function(e){(e.data.tranCode="XX00")&&(t.serviceInfo.list=e.data.data,t.serviceInfo.list.length>0?t.serviceInfo.curService=t.serviceInfo.list[0]:t.serviceInfo.curService={})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},saveProduct:function(){var t=this;if(this.checkValid()){var e=d()(this.productInfo,{sign:1,fatherId:this.productInfo.serviceType||this.curNode.id}),a=this.priceInfo;1===a.length?a.push({}):0===a.length&&(a=[{},{}]),a.map(function(t,e){a[e]=p()(a[e])}),delete e.secIcon,delete e.productDescs,delete e.useGuide,delete e.example1,delete e.example2,delete e.example3;var i=new FormData;for(var n in e)i.append(n,e[n]);this.fileList.map(function(t,e){var a="",n="";switch(e){case 0:a="secIcon",n="files";break;case 1:a="productDescs",n="productDescsPath";break;case 2:a="useGuide",n="useGuidePath";break;case 3:a="example1";break;case 4:a="example2";break;case 5:a="example3"}t.map(function(t,l){t.raw?i.append(a,t.raw):0===e||1===e||2===e?i.append(n,t.url):3!==e&&4!==e&&5!==e||i.append(a,t.url)}),t.length<=0&&(i.append(a,""),0!==e&&1!==e&&2!==e||i.append(n,""))}),a.map(function(t,e){i.append("price",t)}),this.axios.post("/a/operate/products/save",i,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){(e.data.tranCode="XX00")&&t.$emit("input",!1)}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})}},checkValid:function(){var t=!1;return this.$refs.from.validate(function(e){e&&(t=!0)}),t},changeServiceStatus:function(){var t=this;this.serviceInfo.list.map(function(e,a){e.services.map(function(e,a){e.serviceId===t.serviceInfo.checkId&&t.productInfo.relatedId!==e.serviceId&&(t.initPriceList(),t.serviceInfo.checkLabel=e.servName,t.productInfo.relatedId=e.serviceId)})}),this.keyWord=""},initPriceList:function(){var t=this;this.axios({url:"/a/operate/products/getServiceLevel",method:"post",params:{sign:1,serviceId:this.serviceInfo.checkId}}).then(function(e){(e.data.tranCode="XX00")&&(t.priceInfo=e.data.data)}).catch(function(e){t.loading=!1,t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},changeFile:function(t,e,a){this.fileList[a]=e,console.log(this.fileList,e)},removeFile:function(t,e,a){this.fileList[a]=[],console.log(this.fileList)},handleExceed:function(t,e,a){this.$alert("此处只允许上传一张图片","提示",{confirmButtonText:"确定"})}}},D={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"hello"},[a("h3",[t._v(" 产品创建")]),t._v(" "),a("el-form",{ref:"from",attrs:{model:t.productInfo,"label-width":"100px",rules:t.rules}},[a("el-form-item",{attrs:{label:"产品名称",prop:"prodName"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.productInfo.prodName,callback:function(e){t.$set(t.productInfo,"prodName",e)},expression:"productInfo.prodName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"产品类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.productInfo.prodType,callback:function(e){t.$set(t.productInfo,"prodType",e)},expression:"productInfo.prodType"}},t._l(this.productTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"产品提供方"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.productInfo.brand,callback:function(e){t.$set(t.productInfo,"brand",e)},expression:"productInfo.brand"}},t._l(this.providerList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"服务提供方"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.productInfo.servProvId,callback:function(e){t.$set(t.productInfo,"servProvId",e)},expression:"productInfo.servProvId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"计费方式"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.productInfo.pm,callback:function(e){t.$set(t.productInfo,"pm",e)},expression:"productInfo.pm"}},t._l(this.billFrequencyList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"是否是主产品"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.productInfo.isMain,callback:function(e){t.$set(t.productInfo,"isMain",e)},expression:"productInfo.isMain"}},[a("el-option",{attrs:{label:"是",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"否",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"服务选择"}},[a("el-col",{staticClass:"mr20",attrs:{span:6}},[a("el-input",{attrs:{placeholder:"请输入内容",disabled:!0},model:{value:t.serviceInfo.checkLabel,callback:function(e){t.$set(t.serviceInfo,"checkLabel",e)},expression:"serviceInfo.checkLabel"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.serviceInfo.dialogVisible=!0,t.initService()}}},[t._v("选 择")])],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{placeholder:"请输入内容"},model:{value:t.productInfo.prodDesc,callback:function(e){t.$set(t.productInfo,"prodDesc",e)},expression:"productInfo.prodDesc"}})],1),t._v(" "),a("el-tabs",{staticClass:"mt20",attrs:{type:"card"}},[a("el-tab-pane",{attrs:{label:"价格设置"}},[t.serviceInfo.checkId?t._e():a("p",[t._v("提示：请先选择服务")]),t._v(" "),t._l(t.priceInfo,function(e,i){return a("el-form-item",{key:i,attrs:{label:e.slName}},[a("el-col",{staticClass:"mr20",attrs:{span:6}},[a("el-input",{attrs:{type:"number",placeholder:"设置基础价格"},model:{value:e.channelPrice,callback:function(a){t.$set(e,"channelPrice",a)},expression:"item.channelPrice"}})],1),t._v(" "),a("el-col",{staticClass:"mr20",attrs:{span:6}},[a("el-input",{attrs:{type:"number",placeholder:"设置渠道价格"},model:{value:e.basePrice,callback:function(a){t.$set(e,"basePrice",a)},expression:"item.basePrice"}})],1)],1)})],2),t._v(" "),a("el-tab-pane",{attrs:{label:"产品信息"}},[a("el-form",{ref:"from",attrs:{model:t.productInfo,"label-width":"100px",rules:t.rules}},[a("el-form-item",{attrs:{label:"产品功能图："}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/a/operate/products/save","auto-upload":!1,"list-type":"picture","file-list":t.fileList[0],"on-change":function(e,a){return t.changeFile(e,a,0)},"on-remove":function(e,a){return t.changeFile(e,a,0)},accept:".jpg,.png"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"产品说明："}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/a/operate/products/save","auto-upload":!1,"list-type":"picture","file-list":t.fileList[1],"on-change":function(e,a){return t.changeFile(e,a,1)},"on-remove":function(e,a){return t.changeFile(e,a,1)},accept:".jpg,.png"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"使用指南："}},[a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/a/operate/products/save","auto-upload":!1,"list-type":"fileList","file-list":t.fileList[2],"on-change":function(e,a){return t.changeFile(e,a,2)},"on-remove":function(e,a){return t.changeFile(e,a,2)},accept:".pdf,.doc,.docx,.txt"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传pdf/doc/txt文件，且不超过2M")])],1)],1),t._v(" "),a("h4",[t._v("客户案例")]),t._v(" "),a("div",{}),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"mr20",attrs:{"label-width":"0"}},[a("span",[t._v("案例一：")]),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/a/operate/products/save","auto-upload":!1,"list-type":"picture",limit:1,"file-list":t.fileList[3],"on-change":function(e,a){return t.changeFile(e,a,3)},"on-remove":function(e,a){return t.removeFile(e,a,3)},"on-exceed":function(e,a){return t.handleExceed(e,a,3)},multiple:!1,accept:".jpg,.png"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),t._v(" "),a("el-input",{staticClass:"mt20",attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.productInfo.exampleDesc1,callback:function(e){t.$set(t.productInfo,"exampleDesc1",e)},expression:"productInfo.exampleDesc1"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{staticClass:"mr20",attrs:{"label-width":"0"}},[a("span",[t._v("案例二：")]),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/a/operate/products/save","auto-upload":!1,"list-type":"picture",limit:1,"file-list":t.fileList[4],"on-change":function(e,a){return t.changeFile(e,a,4)},"on-remove":function(e,a){return t.removeFile(e,a,4)},"on-exceed":function(e,a){return t.handleExceed(e,a,4)},multiple:!1,accept:".jpg,.png"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),t._v(" "),a("el-input",{staticClass:"mt20",attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.productInfo.exampleDesc2,callback:function(e){t.$set(t.productInfo,"exampleDesc2",e)},expression:"productInfo.exampleDesc2"}})],1)],1),t._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{"label-width":"0"}},[a("span",[t._v("案例三：")]),t._v(" "),a("el-upload",{ref:"upload",staticClass:"upload-demo",attrs:{action:"/a/operate/products/save","auto-upload":!1,"list-type":"picture",limit:1,"file-list":t.fileList[5],"on-change":function(e,a){return t.changeFile(e,a,5)},"on-remove":function(e,a){return t.removeFile(e,a,5)},"on-exceed":function(e,a){return t.handleExceed(e,a,5)},multiple:!1,accept:".jpg,.png"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),t._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1),t._v(" "),a("el-input",{staticClass:"mt20",attrs:{type:"textarea",placeholder:"请输入内容"},model:{value:t.productInfo.exampleDesc3,callback:function(e){t.$set(t.productInfo,"exampleDesc3",e)},expression:"productInfo.exampleDesc3"}})],1)],1)],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){return t.$emit("input",!1)}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveProduct()}}},[t._v("确 定")])],1),t._v(" "),a("el-dialog",{attrs:{title:"服务选择",visible:t.serviceInfo.dialogVisible,width:"500px"},on:{"update:visible":function(e){return t.$set(t.serviceInfo,"dialogVisible",e)},closed:function(e){return t.changeServiceStatus()}}},[a("div",{staticClass:"search-box mb20"},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initService()}}})],1),t._v(" "),a("div",{staticClass:"flex"},[a("div",{staticClass:"left-wrapper"},t._l(t.serviceInfo.list,function(e,i){return a("div",{key:i,class:{active:e.id1===t.serviceInfo.curService.id1},on:{click:function(a){t.serviceInfo.curService=e}}},[t._v(t._s(e.name1))])}),0),t._v(" "),a("div",{staticClass:"right-wrapper"},[a("el-radio-group",{model:{value:t.serviceInfo.checkId,callback:function(e){t.$set(t.serviceInfo,"checkId",e)},expression:"serviceInfo.checkId"}},t._l(t.serviceInfo.curService.services,function(e,i){return a("el-radio",{key:i,attrs:{label:e.serviceId}},[t._v(t._s(e.servName))])}),1)],1)]),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(e){t.serviceInfo.dialogVisible=!1,t.serviceInfo.checkId=t.serviceInfo.orginal}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.serviceInfo.dialogVisible=!1,t.serviceInfo.orginal=t.serviceInfo.checkId}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var C,w={name:"ProductManagement",components:{ProductEdit:a("VU/8")(S,D,!1,function(t){a("AJnW")},"data-v-46e0d202",null).exports},data:function(){return{keyWord:"",isEditing:!1,loading:!1,tableData:[],pageNo:1,pageSize:10,total:0,treeLoading:!1,treeData:[],curNode:{}}},mounted:function(){this.initNodeData()},methods:(C={initNodeData:function(){var t=this;this.treeLoading=!0,this.axios({url:"/a/operate/products/listMenu",method:"post",params:{sign:1}}).then(function(e){t.treeLoading=!1,"XX00"===e.data.transCode&&(t.treeData=e.data.data,t.treeData.length>0&&t.$nextTick(function(){t.$refs.tree.setCurrentKey(t.treeData[0].id),t.initData(1,t.treeData[0])}))}).catch(function(e){t.treeLoading=!1,t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initData:function(t,e){var a=this;this.pageNo=t||1,this.curNode=e||this.curNode,this.loading=!0,this.axios({url:"/a/operate/products/list",method:"post",params:{sign:1,fatherId:this.curNode.id,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(t){a.loading=!1,"XX00"===t.data.transCode&&(a.tableData=t.data.data,a.total=t.data.total)}).catch(function(t){a.loading=!1,a.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},appendNode:function(t,e){var a=this,i=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.1)"});this.axios({url:"/a/operate/products/addMenu",method:"post",params:{sign:1,parentLabel:t.id,newName:e}}).then(function(e){i.close(),"XX00"===e.data.transCode?(t.children?t.children.push(e.data.data):(a.$set(t,"children",[]),1===t.id?a.initNodeData():t.children.push(e.data.data)),a.$nextTick(function(){a.$refs.tree.setCurrentKey(e.data.data.id),a.initData(1,a.treeData[0])})):a.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){i.close(),a.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},deleteNode:function(t){var e=this,a=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.1)"});this.axios({url:"/a/operate/products/deleteMenu",method:"post",params:{sign:1,id:t.id}}).then(function(t){a.close(),"XX00"===t.data.transCode?(e.$message({type:"success",message:"删除成功"}),e.initNodeData()):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){a.close(),e.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},editNode:function(t,e){var a=this,i=this.$loading({lock:!0,background:"rgba(0, 0, 0, 0.1)"});this.axios({method:"post",url:"/a/operate/products/addMenu",params:{sign:1,id:t.id,newName:e}}).then(function(n){i.close(),"XX00"===n.data.transCode?(t.label=e,a.$message({type:"success",message:"修改成功"})):a.$alert(n.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){i.close(),a.$alert(t,"提示",{confirmButtonText:"确定"})})},clickDeleteNode:function(t){var e=this;this.$confirm("确认删除该产品类型, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteNode(t)}).catch(function(){})},clickAppendNode:function(t){var e=this;this.$prompt("请输入节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(a){var i=a.value;e.appendNode(t,i)}).catch(function(){})},clickEditNode:function(t){var e=this;this.$prompt("请输入节点名称","提示",{confirmButtonText:"确定",cancelButtonText:"取消",inputValue:t.label}).then(function(a){var i=a.value;e.editNode(t,i)}).catch(function(){})},clickAddProduct:function(){this.curNode.id?(this.curProductInfo={},this.isEditing=!0):this.$alert("请先选择左侧产品类型","提示",{confirmButtonText:"确定"})},clickEditProduct:function(t){this.curProductInfo=t,this.isEditing=!0},clickDeleteProduct:function(t){var e=this;this.$confirm("确认删除该产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteProduct(t)}).catch(function(){})},deleteProduct:function(t){var e=this;this.axios({method:"post",url:"/a/operate/products/deleteProduct",params:{sign:1,productId:t.productId}}).then(function(t){"XX00"===t.data.transCode?(e.$message({type:"success",message:"删除成功"}),e.initData(1)):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.$alert(t,"提示",{confirmButtonText:"确定"})})},clickRemoveProduct:function(t){var e=this;this.$confirm("确认下架该产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.removeProduct(t)}).catch(function(){})},removeProduct:function(t){var e=this;this.axios({method:"post",url:"/a/operate/products/undercarriage",params:{sign:1,productId:t.productId}}).then(function(a){"XX00"===a.data.transCode?(e.$message({type:"success",message:t.prodName+"下架成功"}),e.initData(1)):e.$alert(a.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.$alert(t,"提示",{confirmButtonText:"确定"})})}},k()(C,"clickDeleteProduct",function(t){var e=this;this.$confirm("确认删除该产品, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.deleteProduct(t)}).catch(function(){})}),k()(C,"deleteProduct",function(t){var e=this;this.axios({method:"post",url:"/a/operate/products/deleteProduct",params:{sign:1,productId:t.productId}}).then(function(t){"XX00"===t.data.transCode?(e.$message({type:"success",message:"删除成功"}),e.initData(1)):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.$alert(t,"提示",{confirmButtonText:"确定"})})}),C),watch:{isEditing:function(t,e){t==e||t||this.initData(1)}}},N={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isEditing?t._e():a("div",{staticClass:"title"},[a("h3",[t._v("产品管理")]),t._v(" "),a("el-button",{staticClass:"pull-right ml20 ",attrs:{type:"primary"},on:{click:function(e){return t.clickAddProduct()}}},[t._v("\n      添加产品\n    ")]),t._v(" "),a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initData()}}})],1)],1),t._v(" "),t.isEditing?t._e():a("div",{staticClass:"flex"},[a("div",{staticClass:"left-wrapper"},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{"node-key":"id","default-expand-all":"",data:t.treeData,"expand-on-click-node":!1,"check-on-click-node":!0,"highlight-current":!0,"current-node-key":t.curNode.id},on:{"current-change":function(e){t.initData(1,e)}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node,n=e.data;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"node-label"},[t._v(t._s(i.label))]),t._v(" "),a("span",[a("el-button",{attrs:{type:"text"},on:{click:function(){return t.clickAppendNode(n)}}},[a("i",{staticClass:"el-icon-circle-plus-outline"})]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(){return t.clickEditNode(n)}}},[a("i",{staticClass:"el-icon-edit-outline"})]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(){return t.clickDeleteNode(n)}}},[a("i",{staticClass:"el-icon-delete"})])],1)])}}],null,!1,3599246332)})],1),t._v(" "),a("div",{staticClass:"right-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"prodName",label:"产品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"servName",label:"包含服务"}}),t._v(" "),a("el-table-column",{attrs:{prop:"brandLabel",label:"提供者"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.clickEditProduct(e.row)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.clickDeleteProduct(e.row)}}},[t._v("删除")]),t._v(" "),1==e.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.clickRemoveProduct(e.row)}}},[t._v("下架")]):t._e()]}}],null,!1,2693255391)})],1),t._v(" "),t.tableData.length>0?a("el-pagination",{staticClass:"mt20 pull-right",attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,"page-size":t.pageSize,total:t.total},on:{"current-change":function(e){t.initData(e)}}}):t._e()],1)]),t._v(" "),t.isEditing?a("ProductEdit",{attrs:{curNode:t.curNode,curRow:t.curProductInfo},model:{value:t.isEditing,callback:function(e){t.isEditing=e},expression:"isEditing"}}):t._e()],1)},staticRenderFns:[]};var L=a("VU/8")(w,N,!1,function(t){a("L1Q6")},"data-v-c808c524",null).exports,$={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-wrapper"},[t._m(0),t._v(" "),a("div",[a("el-form",{staticClass:"demo-form-inline mb20",attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{attrs:{lg:4,sm:8}},[a("el-form-item",{attrs:{label:"产品类型"}},[a("el-select",{attrs:{placeholder:"产品类型"},on:{change:function(e){return t.initData()}},model:{value:t.searchCondition.productType,callback:function(e){t.$set(t.searchCondition,"productType",e)},expression:"searchCondition.productType"}},t._l(t.productTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{lg:4,sm:8}},[a("el-form-item",{attrs:{label:"订单类型"}},[a("el-select",{attrs:{placeholder:"订单类型"},on:{change:function(e){return t.initData()}},model:{value:t.searchCondition.orderType,callback:function(e){t.$set(t.searchCondition,"orderType",e)},expression:"searchCondition.orderType"}},t._l(t.orderTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{lg:4,sm:8}},[a("el-form-item",{attrs:{label:"支付状态"}},[a("el-select",{attrs:{placeholder:"支付状态"},on:{change:function(e){return t.initData()}},model:{value:t.searchCondition.payType,callback:function(e){t.$set(t.searchCondition,"payType",e)},expression:"searchCondition.payType"}},t._l(t.payTypeList,function(t,e){return a("el-option",{key:e,attrs:{label:t.label,value:t.value}})}),1)],1)],1),t._v(" "),a("el-col",{attrs:{lg:5,sm:8}},[a("el-form-item",{staticClass:"date-selector-box",attrs:{label:"起始时间"}},[a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"开始日期","value-format":"yyyy-MM-dd"},on:{change:function(e){return t.initData()}},model:{value:t.searchCondition.startDate,callback:function(e){t.$set(t.searchCondition,"startDate",e)},expression:"searchCondition.startDate"}})],1),t._v(" "),a("el-col",{staticClass:"line text-center",attrs:{span:2}},[t._v("-")]),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"结束日期","value-format":"yyyy-MM-dd"},on:{change:function(e){return t.initData()}},model:{value:t.searchCondition.endDate,callback:function(e){t.$set(t.searchCondition,"endDate",e)},expression:"searchCondition.endDate"}})],1)],1)],1),t._v(" "),a("el-col",{staticClass:"search-col",attrs:{lg:5,sm:10}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"请输入关键字"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.initData()}},model:{value:t.searchCondition.keyWord,callback:function(e){t.$set(t.searchCondition,"keyWord",e)},expression:"searchCondition.keyWord"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initData()}}})],1)])],1),t._v(" "),a("el-col",{attrs:{lg:1,sm:2}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("el-button",{attrs:{type:"primary"}},[a("a",{staticClass:"btn",attrs:{type:"primary",href:"http://172.22.79.39:8080/a/operate/custOrderItem/export?sign=2&orderType="+t.searchCondition.orderType+"&productType="+t.searchCondition.productType+"&status="+t.searchCondition.payType+"&startDate="+t.searchCondition.startDate+"&endDate="+t.searchCondition.endDate+"&orderProduct="+t.searchCondition.keyWord}},[t._v("导出Excel")])])],1)],1)],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"custName",label:"客户名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"channel",label:"订单类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderProduct",label:"产品"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderSlGrade",label:"服务等级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderBilling",label:"计费方式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"订购周期"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"订购数量"}}),t._v(" "),a("el-table-column",{attrs:{prop:"addDate",label:"创建时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statusDate",label:"支付时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"statusLabel",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{warning:"1"==e.row.status}},[t._v(t._s(e.row.statusLabel))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"money",label:"应付金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleDetail=!0,t.curRow=e.row}}},[t._v("详情")]),t._v(" "),"1"===e.row.status?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleUpdatePrice=!0,t.curRow=e.row,t.moneyMsg=e.row.money}}},[t._v("价格调整")]):t._e()]}}])})],1),t._v(" "),t.tableData.length>0?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,"page-size":t.pageSize,total:t.total},on:{"current-change":t.initData}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"订单详情",visible:t.dialogVisibleDetail,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleDetail=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"订单状态:"}},[a("span",{class:{warning:"1"==t.curRow.status}},[t._v(t._s(t.curRow.statusLabel))])])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"订单号:"}},[t._v("\n          "+t._s(t.curRow.orderId)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"创建时间:"}},[t._v("\n          "+t._s(t.curRow.addDate)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"支付时间:"}},[t._v("\n          "+t._s(t.curRow.statusDate)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"产品名称:"}},[t._v("\n          "+t._s(t.curRow.orderProduct)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"付费类型:"}},[t._v("\n          "+t._s(t.curRow.orderBilling)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"数量:"}},[t._v("\n          "+t._s(t.curRow.orderNo)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"服务开始时间:"}},[t._v("\n          "+t._s(t.curRow.servStartDate)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"服务结束时间:"}},[t._v("\n          "+t._s(t.curRow.servEndDate)+"\n        ")])],1),t._v(" "),a("el-col",{staticClass:"mb20",attrs:{span:24}},[a("el-form-item",{attrs:{label:"应付金额:"}},[t._v("\n          "+t._s(t.curRow.money)+"\n        ")])],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleDetail=!1}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"价格调整",visible:t.dialogVisibleUpdatePrice,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleUpdatePrice=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("h3",{staticClass:"mb20"},[t._v(t._s(t.curRow.custName)+" 通过智讯云账号："+t._s(t.curRow.phone)+" 订购智讯云提供的如下产品/服务，正在进行价格调整：")]),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"订单状态:"}},[a("span",{class:{warning:"1"==t.curRow.status}},[t._v(t._s(t.curRow.statusLabel))])])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"订单号:"}},[t._v("\n          "+t._s(t.curRow.orderId)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"创建时间:"}},[t._v("\n          "+t._s(t.curRow.addDate)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"支付时间:"}},[t._v("\n          "+t._s(t.curRow.statusDate)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"产品名称:"}},[t._v("\n          "+t._s(t.curRow.orderProduct)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"付费类型:"}},[t._v("\n          "+t._s(t.curRow.orderBilling)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"数量:"}},[t._v("\n          "+t._s(t.curRow.orderNo)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"服务开始时间:"}},[t._v("\n          "+t._s(t.curRow.servStartDate)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"服务结束时间:"}},[t._v("\n          "+t._s(t.curRow.servEndDate)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"应付金额:"}},[t._v("\n          "+t._s(t.curRow.money)+"\n        ")])],1),t._v(" "),a("el-col",{staticClass:"mb20",attrs:{span:22}},[a("el-form-item",{attrs:{label:"修改金额:"}},[a("el-input",{attrs:{type:"number"},model:{value:t.moneyMsg,callback:function(e){t.moneyMsg=e},expression:"moneyMsg"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleUpdatePrice=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.updatePrice()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"title"},[e("h3",[this._v("订单管理")])])}]};var T=a("VU/8")({name:"OrderManagement",data:function(){return{productTypeList:[],orderTypeList:[],payTypeList:[],searchCondition:{productType:"",orderType:"",payType:"",keyWord:"",startDate:"",endDate:""},loading:!1,tableData:[],pageNo:1,pageSize:10,total:0,curRow:{},dialogVisibleDetail:!1,dialogVisibleUpdatePrice:!1,moneyMsg:""}},mounted:function(){this.initProductSelect(),this.initOrderSelect(),this.initPaySelect(),this.initData(1)},methods:{initProductSelect:function(){var t=this;this.axios({url:"/a/operate/custOrderItem/getProductType",method:"post",params:{sign:1}}).then(function(e){"XX00"===e.data.transCode?t.productTypeList=e.data.data:t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initOrderSelect:function(){var t=this;this.axios({url:" /a/operate/custOrderItem/getOrderType",method:"post",params:{sign:1}}).then(function(e){"XX00"===e.data.transCode?(t.orderTypeList=e.data.data,t.orderType=t.orderTypeList[0].vlaue):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initPaySelect:function(){var t=this;this.axios({url:" /a/operate/custOrderItem/getPayStatus",method:"post",params:{sign:1}}).then(function(e){"XX00"===e.data.transCode?t.payTypeList=e.data.data:t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initData:function(t){var e=this;this.pageNo=t||1,this.axios({url:"/a/operate/custOrderItem/findQuery",method:"post",params:{sign:2,orderType:this.searchCondition.orderType,productType:this.searchCondition.productType,status:this.searchCondition.payType,startDate:this.searchCondition.startDate,endDate:this.searchCondition.endDate,orderProduct:this.searchCondition.keyWord,pageNo:this.pageNo,pageSize:this.pageSize}}).then(function(t){"XX00"===t.data.transCode?(e.tableData=t.data.data.data,e.total=t.data.data.total):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},updatePrice:function(){var t=this;this.axios({url:"/a/operate/custOrderItem/updateMoney",method:"post",params:{sign:2,custOrderId:this.curRow.custOrderId,moneyMsg:this.moneyMsg}}).then(function(e){"XX00"===e.data.transCode?(t.dialogVisibleUpdatePrice=!1,t.initData(t.pageNo)):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},changePage:function(){}}},$,!1,function(t){a("9xES")},"data-v-13b12736",null).exports,V={name:"ContractManagement",data:function(){return{activeIndex:"1",isEdit:!1,undealTotal:0,keyWord:"",loading:!1,tableData:[],pageNo:1,pageSize:10,total:0,curContractInfo:{},dialogVisibleDetail:!1,dealStatus:!1}},mounted:function(){this.initData(),this.initDataUndeal()},methods:{initData:function(t){var e=this;this.loading=!0,this.pageNo=t||1,this.axios({url:"/a/operate/custContract/getCustContractList",method:"post",params:{sign:this.activeIndex,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(t){e.loading=!1,"XX00"===t.data.transCode?(e.tableData=t.data.data,e.total=t.data.total):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.loading=!1,e.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initDataUndeal:function(){var t=this;this.axios({url:"/a/operate/custContract/getUndealContractCount",method:"post",params:{sign:this.activeIndex,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(e){"XX00"===e.data.transCode?t.undealTotal=e.data.data:t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},saveContract:function(){var t=this;this.isEdit&&this.dealStatus?this.axios({url:"/a/operate/custContract/saveContract",method:"post",params:{sign:2,dealStatus:this.dealStatus?"2":void 0,custId:this.curContractInfo.custId,contractId:this.curContractInfo.contractId}}).then(function(e){"XX00"===e.data.transCode?(t.dialogVisibleDetail=!1,t.initData(t.pageNo),t.initDataUndeal()):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})}):this.dialogVisibleDetail=!1}}},B={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-wrapper"},[a("div",{staticClass:"title"},[a("h3",[t._v("合同管理")]),t._v(" "),a("el-form",{staticClass:"demo-form-inline mb20",attrs:{"label-width":"80px"}},[a("el-row",[a("el-form-item",{staticClass:" pull-right",attrs:{"label-width":"0px"}},[a("el-button",{attrs:{type:"primary"}},[a("a",{staticClass:"btn",attrs:{type:"primary",href:"/a/operate/custContract/standContractDownload?sign=1"}},[t._v("合同模板下载")])])],1),t._v(" "),a("el-col",{staticClass:"search-col pull-right",attrs:{lg:5,sm:10}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"请输入关键字"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.initData()}},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initData()}}})],1)])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"main-content"},[a("el-badge",{staticClass:"item",attrs:{value:t.undealTotal}}),t._v(" "),a("el-tabs",{on:{"tab-click":function(){t.initData()}},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"全部",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"未处理",name:"2"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已处理",name:"3"}})],1),t._v(" "),a("div"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"companyName",label:"企业名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"contacter",label:"联系人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"联系地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"mailbox",label:"联系人邮箱"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderProduct",label:"订购产品"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderSlGrade",label:"服务等级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"money",label:"支付金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"dealStatusLabel",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{warning:"1"==e.row.dealStatus}},[t._v(t._s(e.row.dealStatusLabel))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.dealStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleDetail=!0,t.isEdit=!0,t.curContractInfo=e.row,t.dealStatus=!1}}},[t._v("查看申请")]):t._e(),t._v(" "),"2"===e.row.dealStatus?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleDetail=!0,t.isEdit=!1,t.curContractInfo=e.row,t.dealStatus=!1}}},[t._v("详情")]):t._e()]}}])})],1)],1),t._v(" "),t.tableData.length>0?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,"page-size":t.pageSize,total:t.total},on:{"current-change":t.initData}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"客户合同申请",visible:t.dialogVisibleDetail,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleDetail=e}}},[a("p",[t._v("\n      当前状态："),a("span",{class:{warning:"1"==t.curContractInfo.dealStatus}},[t._v(t._s(t.curContractInfo.dealStatusLabel))]),t._v(" "),t.isEdit?a("el-checkbox",{staticClass:"pull-right",model:{value:t.dealStatus,callback:function(e){t.dealStatus=e},expression:"dealStatus"}},[t._v("合同已发送")]):t._e()],1),t._v(" "),a("div",[a("h3",[t._v(" 企业信息")]),t._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"申请日期:"}},[t._v("\n            "+t._s(t.curContractInfo.createTime)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同类型:"}},[t._v("\n            "+t._s(t.curContractInfo.ispaperLabel)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"公司名称:"}},[t._v("\n            "+t._s(t.curContractInfo.companyName)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"联系人:"}},[t._v("\n            "+t._s(t.curContractInfo.contacter)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"电话:"}},[t._v("\n            "+t._s(t.curContractInfo.phone)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"电子邮箱:"}},[t._v("\n            "+t._s(t.curContractInfo.mailbox)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"联系地址:"}},[t._v("\n            "+t._s(t.curContractInfo.address)+"\n          ")])],1)],1)],1),t._v(" "),a("div",{staticClass:"radius"},[a("h3",[t._v(" 订单信息")]),t._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订单号:"}},[t._v("\n            "+t._s(t.curContractInfo.orderId)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"支付时间:"}},[t._v("\n            "+t._s(t.curContractInfo.payDate)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品名称:"}},[t._v("\n            "+t._s(t.curContractInfo.orderProduct)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"服务等级:"}},[t._v("\n            "+t._s(t.curContractInfo.orderSlGrade)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"付费类型:"}},[t._v("\n            "+t._s(t.curContractInfo.orderBilling)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"数量:"}},[t._v("\n            "+t._s(t.curContractInfo.orderNo)+"\n          ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"金额:"}},[t._v("\n            "+t._s(t.curContractInfo.money)+"\n          ")])],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isEdit?a("el-button",{attrs:{type:"default"},on:{click:function(e){t.dialogVisibleDetail=!1}}},[t._v("取 消")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveContract()}}},[t._v("确 定")])],1)])],1)},staticRenderFns:[]};var E=a("VU/8")(V,B,!1,function(t){a("vPZY")},"data-v-178a8b73",null).exports,P={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.isEditing?t._e():a("div",{staticClass:"title"},[a("h3",[t._v("客户管理")]),t._v(" "),a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"请输入关键字"},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initData()}}})],1)]),t._v(" "),t.isEditing?t._e():a("div",{staticClass:"flex"},[a("div",{staticClass:"left-wrapper"},[a("el-tree",{directives:[{name:"loading",rawName:"v-loading",value:t.treeLoading,expression:"treeLoading"}],ref:"tree",attrs:{"node-key":"id","default-expand-all":"",data:t.treeData,"expand-on-click-node":!1,"check-on-click-node":!0,"highlight-current":!0,"current-node-key":t.curNode.id},on:{"current-change":function(e){t.initData(1,e)}},scopedSlots:t._u([{key:"default",fn:function(e){var i=e.node;return a("span",{staticClass:"custom-tree-node"},[a("span",{staticClass:"node-label"},[t._v(t._s(i.label))])])}}],null,!1,1913439681)})],1),t._v(" "),a("div",{staticClass:"right-wrapper"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"companyName",label:"客户名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userName",label:"联系人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系方式"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return t.getOrder(1,e.row)}}},[t._v("订购列表")])]}}],null,!1,759788328)})],1),t._v(" "),t.tableData.length>0?a("el-pagination",{staticClass:"mt20 pull-right",attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,"page-size":t.pageSize,total:t.total},on:{"current-change":function(e){t.initData(e)}}}):t._e()],1)]),t._v(" "),a("el-dialog",{attrs:{title:"订购列表",visible:t.dialogVisible,width:"80%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loadingDialog,expression:"loadingDialog"}],staticStyle:{width:"100%"},attrs:{data:t.tableDataDialog,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"productName",label:"订购产品名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productType",label:"产品类型"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderNo",label:"订购数"}}),t._v(" "),a("el-table-column",{attrs:{prop:"servStartDate",label:"服务开通时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"servEndDate",label:"服务到期时间"}}),t._v(" "),a("el-table-column",{attrs:{prop:"operation",label:"运行状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{warning:"1"==e.row.serviceStatus||"3"==e.row.serviceStatus,success:"2"==e.row.serviceStatus,info:"4"==e.row.serviceStatus}},[t._v(t._s(e.row.operation))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"orderCycle",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.curOrder=e.row,t.dialogVisibleStatus=!0,t.serviceStatus=e.row.serviceStatus}}},[t._v("状态变更")])]}}])})],1),t._v(" "),t.tableDataDialog.length>0?a("el-pagination",{staticClass:"mt20 ",attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNoDialog,"page-size":t.pageSizeDialog,total:t.totalDialog},on:{"current-change":function(e){t.getOrder(e)}}}):t._e(),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"default"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("确 定")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"状态变更",visible:t.dialogVisibleStatus,width:"400px"},on:{"update:visible":function(e){t.dialogVisibleStatus=e}}},[a("el-form",{ref:"from",attrs:{"label-width":"100px"}},[a("el-form-item",{attrs:{label:"客户名称:"}},[t._v(t._s(t.curRow.companyName)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"订单号:"}},[t._v("\n        "+t._s(t.curOrder.orderId)+"\n      ")]),t._v(" "),a("el-form-item",{attrs:{label:"开通状态:"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.serviceStatus,callback:function(e){t.serviceStatus=e},expression:"serviceStatus"}},[a("el-option",{attrs:{label:"待开通",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"使用中",value:"2"}}),t._v(" "),a("el-option",{attrs:{label:"退订中",value:"3"}}),t._v(" "),a("el-option",{attrs:{label:"已停止",value:"4"}})],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogVisibleStatus=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveOrderStatus()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var X=a("VU/8")({name:"UserManagement",data:function(){return{keyWord:"",isEditing:!1,loading:!1,tableData:[],pageNo:1,pageSize:10,total:0,loadingDialog:!1,tableDataDialog:[],pageNoDialog:1,pageSizeDialog:5,totalDialog:0,treeLoading:!1,treeData:[],curNode:{},dialogVisible:!1,dialogVisibleStatus:!1,curRow:{},curOrder:{},serviceStatus:1}},mounted:function(){this.initNodeData()},methods:{initNodeData:function(){var t=this;this.treeLoading=!0,this.axios({url:"/a/operate/serviceWorkOrder/getProvince",method:"post",params:{sign:1}}).then(function(e){t.treeLoading=!1,"XX00"===e.data.transCode&&(t.treeData=e.data.data,t.treeData.length>0&&t.$nextTick(function(){t.$refs.tree.setCurrentKey(t.treeData[0].id),t.initData(1,t.treeData[0])}))}).catch(function(e){t.treeLoading=!1,t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initData:function(t,e){var a=this;this.pageNo=t||1,this.curNode=e||this.curNode,this.loading=!0,this.axios({url:"/a/operate/serviceWorkOrder/getProvinceUser",method:"post",params:{sign:1,id:this.curNode.id,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(t){a.loading=!1,"XX00"===t.data.transCode&&(a.tableData=t.data.data,a.total=t.data.total)}).catch(function(t){a.loading=!1,a.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},getOrder:function(t,e){var a=this;this.loadingDialog=!0,this.pageNoDialog=t||this.pageNoDialog,this.curRow=e||this.curRow,this.axios({url:"/a/operate/serviceWorkOrder/getProductByUser",method:"post",params:{sign:1,custId:this.curRow.custId,pageNo:this.pageNoDialog,pageSize:this.pageSizeDialog}}).then(function(t){a.loadingDialog=!1,"XX00"===t.data.transCode&&(a.tableDataDialog=t.data.data,a.totalDialog=t.data.total,a.dialogVisible=!0)}).catch(function(t){a.loadingDialog=!1,a.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},saveOrderStatus:function(){var t=this;this.axios({url:"/a/operate/serviceWorkOrder/save",method:"post",params:{sign:1,workId:this.curOrder.workId,status:this.serviceStatus}}).then(function(e){"XX00"===e.data.transCode&&(t.getOrder(),t.dialogVisibleStatus=!1)}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})}}},P,!1,function(t){a("zgpa")},"data-v-b02e6dd4",null).exports,O={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-wrapper"},[a("div",{staticClass:"title"},[a("h3",[t._v("退订管理")]),t._v(" "),a("el-form",{staticClass:"demo-form-inline mb20",attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{staticClass:"search-col pull-right",attrs:{lg:5,sm:10}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"请输入关键字"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.initData()}},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initData()}}})],1)])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"main-content"},[a("el-badge",{staticClass:"item",attrs:{value:t.undealTotal}}),t._v(" "),a("el-tabs",{on:{"tab-click":function(){t.initData()}},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"未处理",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已解决",name:"2"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已撤回",name:"4"}})],1),t._v(" "),a("div"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"custName",label:"客户名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderId",label:"订单号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"useName",label:"联系人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"province",label:"所在地区"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"productName",label:"订购产品"}}),t._v(" "),a("el-table-column",{attrs:{prop:"slGrade",label:"服务等级"}}),t._v(" "),a("el-table-column",{attrs:{prop:"serviceStatus",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{warning:"1"==e.row.serviceStatusValue,success:"2"==e.row.serviceStatusValue,danger:"3"==e.row.serviceStatusValue,info:"4"==e.row.serviceStatusValue}},[t._v(t._s(e.row.serviceStatus))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){var i=this;return["1"==e.row.serviceStatusValue?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleDetail=!0,t.isEdit=!0,t.curOrderInfo=e.row,i.dealStatus=!1}}},[t._v("查看申请")]):t._e(),t._v(" "),"1"!=e.row.serviceStatusValue?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleDetail=!0,t.isEdit=!1,t.curOrderInfo=e.row,i.dealStatus=!1}}},[t._v("详情")]):t._e()]}}])})],1)],1),t._v(" "),t.tableData.length>0?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,"page-size":t.pageSize,total:t.total},on:{"current-change":t.initData}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"退订申请",visible:t.dialogVisibleDetail,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleDetail=e}}},[a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"当前状态:"}},[a("span",{class:{warning:"1"==t.curOrderInfo.serviceStatusValue,success:"2"==t.curOrderInfo.serviceStatusValue,danger:"3"==t.curOrderInfo.serviceStatusValue,info:"4"==t.curOrderInfo.serviceStatusValue}},[t._v(t._s(t.curOrderInfo.serviceStatus))])])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"产品:"}},[t._v("\n          "+t._s(t.curOrderInfo.productName)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"订购数:"}},[t._v("\n          "+t._s(t.curOrderInfo.orderNo)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"开通状态:"}},[t._v("\n          "+t._s(t.curOrderInfo.oderStatus)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"退款金额:"}},[t._v("\n          "+t._s(t.curOrderInfo.money)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"退订说明:"}},[t._v("\n          "+t._s(t.curOrderInfo.desc)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"退订处理:"}},[a("el-radio-group",{attrs:{disabled:!t.isEdit},model:{value:t.curOrderInfo.passChecked,callback:function(e){t.$set(t.curOrderInfo,"passChecked",e)},expression:"curOrderInfo.passChecked"}},[a("el-radio",{attrs:{label:"2"}},[t._v("审核通过，同意退订")]),t._v(" "),a("el-radio",{attrs:{label:"3"}},[t._v("审核不通过，驳回申请")])],1)],1)],1),t._v(" "),a("el-col",{staticClass:"mt20",attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注:"}},[t.isEdit?t._e():a("span",[t._v(" "+t._s(t.curOrderInfo.pre2))]),t._v(" "),t.isEdit?a("el-input",{attrs:{type:"textarea"},model:{value:t.curOrderInfo.pre2,callback:function(e){t.$set(t.curOrderInfo,"pre2",e)},expression:"curOrderInfo.pre2"}}):t._e()],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isEdit?a("el-button",{attrs:{type:"default"},on:{click:function(e){t.dialogVisibleDetail=!1}}},[t._v("取 消")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveOrder()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var z=a("VU/8")({name:"UnsubscribeManagement",data:function(){return{activeIndex:"0",isEdit:!1,undealTotal:0,keyWord:"",loading:!1,tableData:[],pageNo:1,pageSize:10,total:0,curOrderInfo:{},dialogVisibleDetail:!1,dealStatus:!1}},mounted:function(){this.initData(),this.initDataUndeal()},methods:{initData:function(t){var e=this;this.loading=!0,this.pageNo=t||1,this.axios({url:"/a/operate/custUnsubscribeHistory/orderInfoList",method:"post",params:{sign:this.activeIndex,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(t){e.loading=!1,"XX00"===t.data.transCode?(e.tableData=t.data.data,e.total=t.data.total):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.loading=!1,e.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initDataUndeal:function(){var t=this;this.axios({url:"/a/operate/custUnsubscribeHistory/getUndealOrderCount",method:"post",params:{sign:this.activeIndex,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(e){"XX00"===e.data.transCode?t.undealTotal=e.data.data:t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},saveOrder:function(){var t=this;this.isEdit?this.axios({url:"/a/operate/custUnsubscribeHistory/save",method:"post",params:{sign:2,serviceStatus:this.curOrderInfo.passChecked,pre2:this.curOrderInfo.pre2,custId:this.curOrderInfo.custId,workId:this.curOrderInfo.workId}}).then(function(e){"XX00"===e.data.transCode?(t.dialogVisibleDetail=!1,t.initData(t.pageNo),t.initDataUndeal()):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})}):this.dialogVisibleDetail=!1}}},O,!1,function(t){a("ujQY")},"data-v-7014ca80",null).exports,R={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-wrapper"},[a("div",{staticClass:"title"},[a("h3",[t._v("发票管理")]),t._v(" "),a("el-form",{staticClass:"demo-form-inline mb20",attrs:{"label-width":"80px"}},[a("el-row",[a("el-col",{staticClass:"search-col pull-right",attrs:{lg:5,sm:10}},[a("el-form-item",{attrs:{"label-width":"0px"}},[a("div",{staticClass:"search-box"},[a("el-input",{attrs:{placeholder:"请输入关键字"},on:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.initData()}},model:{value:t.keyWord,callback:function(e){t.keyWord=e},expression:"keyWord"}}),t._v(" "),a("el-button",{staticClass:"el-icon-search",attrs:{type:"text"},on:{click:function(e){return t.initData()}}})],1)])],1)],1)],1)],1),t._v(" "),a("div",{staticClass:"main-content"},[a("el-badge",{staticClass:"item",attrs:{value:t.undealTotal}}),t._v(" "),a("el-tabs",{on:{"tab-click":function(){t.initData()}},model:{value:t.activeIndex,callback:function(e){t.activeIndex=e},expression:"activeIndex"}},[a("el-tab-pane",{attrs:{label:"全部",name:"0"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"未处理",name:"1"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已解决",name:"2"}}),t._v(" "),a("el-tab-pane",{attrs:{label:"已撤回",name:"4"}})],1),t._v(" "),a("div"),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"mb20",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"custName",label:"客户名称"}}),t._v(" "),a("el-table-column",{attrs:{prop:"prodName",label:"账期/产品"}}),t._v(" "),a("el-table-column",{attrs:{prop:"remark1",label:"可开票金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"money",label:"实付金额"}}),t._v(" "),a("el-table-column",{attrs:{prop:"nameInvoice",label:"联系人"}}),t._v(" "),a("el-table-column",{attrs:{prop:"phone",label:"联系电话"}}),t._v(" "),a("el-table-column",{attrs:{prop:"staticIdLabel",label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{class:{warning:"1"==e.row.staticId,success:"2"==e.row.staticId,danger:"3"==e.row.staticId,info:"4"==e.row.staticId}},[t._v(t._s(e.row.staticIdLabel))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["1"===e.row.staticId?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleDetail=!0,t.isEdit=!0,t.curInvoiceInfo=e.row}}},[t._v("查看申请")]):t._e(),t._v(" "),"1"!==e.row.staticId?a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(){t.dialogVisibleDetail=!0,t.isEdit=!1,t.curInvoiceInfo=e.row}}},[t._v("详情")]):t._e()]}}])})],1)],1),t._v(" "),t.tableData.length>0?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next","current-page":t.pageNo,"page-size":t.pageSize,total:t.total},on:{"current-change":t.initData}}):t._e(),t._v(" "),a("el-dialog",{attrs:{title:"发票申请处理",visible:t.dialogVisibleDetail,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleDetail=e}}},[a("p",[t._v("\n      当前状态："+t._s(t.curInvoiceInfo.staticIdLabel)+"\n    ")]),t._v(" "),a("el-form",{ref:"form",attrs:{"label-width":"100px"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"产品/账期:"}},[t._v("\n          "+t._s(t.curInvoiceInfo.prodName)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"可开票金额:"}},[t._v("\n          "+t._s(t.curInvoiceInfo.remark1)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"实付金额:"}},[t._v("\n          "+t._s(t.curInvoiceInfo.money)+"\n        ")])],1),t._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"退订处理:"}},[a("el-radio-group",{attrs:{disabled:!t.isEdit},model:{value:t.curInvoiceInfo.staticId,callback:function(e){t.$set(t.curInvoiceInfo,"staticId",e)},expression:"curInvoiceInfo.staticId"}},[a("el-radio",{attrs:{label:"2"}},[t._v("审核通过，已开具发票")]),t._v(" "),a("el-radio",{attrs:{label:"3"}},[t._v("审核不通过，驳回申请")])],1)],1)],1),t._v(" "),a("el-col",{staticClass:"mt20",attrs:{span:24}},[a("el-form-item",{attrs:{label:"备注:"}},[t.isEdit?t._e():a("span",[t._v(" "+t._s(t.curInvoiceInfo.remark4))]),t._v(" "),t.isEdit?a("el-input",{attrs:{type:"textarea"},model:{value:t.curInvoiceInfo.remark4,callback:function(e){t.$set(t.curInvoiceInfo,"remark4",e)},expression:"curInvoiceInfo.remark4"}}):t._e()],1)],1)],1),t._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t.isEdit?a("el-button",{attrs:{type:"default"},on:{click:function(e){t.dialogVisibleDetail=!1}}},[t._v("取 消")]):t._e(),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveInvoice()}}},[t._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var W=a("VU/8")({name:"InvoiceManagement",data:function(){return{activeIndex:"0",isEdit:!1,undealTotal:0,keyWord:"",loading:!1,tableData:[],pageNo:1,pageSize:10,total:0,curInvoiceInfo:{},dialogVisibleDetail:!1,dealStatus:!1}},mounted:function(){this.initData(),this.initDataUndeal()},methods:{initData:function(t){var e=this;this.loading=!0,this.pageNo=t||1,this.axios({url:"/a/operate/invoiceReq/invoiceList",method:"post",params:{sign:this.activeIndex,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(t){e.loading=!1,"XX00"===t.data.transCode?(e.tableData=t.data.data,e.total=t.data.total):e.$alert(t.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(t){e.loading=!1,e.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},initDataUndeal:function(){var t=this;this.axios({url:"/a/operate/invoiceReq/getUndealCount",method:"post",params:{sign:this.activeIndex,pageNo:this.pageNo,pageSize:this.pageSize,key:this.keyWord}}).then(function(e){"XX00"===e.data.transCode?t.undealTotal=e.data.data:t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})})},saveInvoice:function(){var t=this;this.isEdit?this.axios({url:"/a/operate/invoiceReq/save",method:"post",params:{sign:3,remark4:this.curInvoiceInfo.remark4,staticId:this.curInvoiceInfo.staticId,id:this.curInvoiceInfo.id}}).then(function(e){"XX00"===e.data.transCode?(t.dialogVisibleDetail=!1,t.initData(t.pageNo),t.initDataUndeal()):t.$alert(e.data.msg,"提示",{confirmButtonText:"确定"})}).catch(function(e){t.$alert("服务器报错","提示",{confirmButtonText:"确定"})}):this.dialogVisibleDetail=!1}}},R,!1,function(t){a("3EXP")},"data-v-34228704",null).exports;l.default.use(s.a);var M=new s.a({routes:[{path:"/",redirect:"/serviceManagement"},{path:"/serviceManagement",name:"ServiceManagement",component:I},{path:"/productManagement",name:"ProductManagement",component:L},{path:"/orderManagement",name:"OrderManagement",component:T},{path:"/contractManagement",name:"ContractManagement",component:E},{path:"/userManagement",name:"UserManagement",component:X},{path:"/unsubscribeManagement",name:"UnsubscribeManagement",component:z},{path:"/invoiceManagement",name:"InvoiceManagement",component:W}]}),U=a("mtWM"),F=a.n(U);l.default.config.productionTip=!1,l.default.use(n.a),l.default.prototype.axios=F.a,new l.default({el:"#app",router:M,components:{App:r},template:"<App/>"})},PGHr:function(t,e){},cTSF:function(t,e){},ujQY:function(t,e){},vPZY:function(t,e){},zgpa:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.83e4076bc82534b6667a.js.map